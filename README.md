# Проект автотестов для проверки API промо страницы АСТ.

Этот проект содержит автоматические тесты для проверки API с использованием библиотеки `requests`. Тесты покрывают основные методы API, такие как получение данных об аудио, книгах и отзывах.

## Структура проекта

- **api_requests/api.py**
  
  Содержит класс `AstApi`, который реализует взаимодействие с API. Для каждого доступного эндпоинта предусмотрен отдельный метод.

- **data_settings.py**

  Файл для загрузки и управления конфигурацией проекта с использованием переменных окружения (`.env`).

- **test_api.py**

  Набор тестов для проверки корректности работы методов API. Используется библиотека `pytest`.

## Установка

1. Склонируйте репозиторий:

    ```bash
    git clone https://github.com/AST_Admin_API_Testing.git
    ```

2. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

3. Создайте файл `.env` в корне проекта и добавьте необходимые переменные окружения:

    ```env
    valid_login=ваш_логин
    valid_password=ваш_пароль
    wrong_id=неверный_id
    wrong_format=неверный_формат
    wrong_picture_path=неверный_путь_к_файлу
    right_id=правильный_id
    right_id_2=правильный_id_2
    ```

## Использование

1. Запустите тесты с помощью команды:

    ```bash
    pytest test_api.py
    ```

2. Результаты выполнения тестов будут отображены в консоли.

## Описание методов API

Класс `AstApi` содержит следующие методы:

- `get_audio()`: Получает список аудио.
- `get_books()`: Получает список книг.
- `get_books_picture()`: Получает изображения книг.
- `get_reviews_picture()`: Получает изображения отзывов.
- `get_reviews()`: Получает список отзывов.

Каждый метод возвращает кортеж `(status_code, result)`, где:
- `status_code` — HTTP-статус ответа.
- `result` — результат в формате JSON (или текст, если JSON недоступен).

## Описание тестов

Каждый тест проверяет:
- HTTP-статус ответа (ожидается 200).
- Наличие ключевых элементов в ответе, например `status`.

Пример теста:

```python
from api_requests.api import AstApi

ast = AstApi()

def test_get_audio():
    status, result = ast.get_audio()
    assert status == 200, 'Ожидался статус 200, но сервер вернул другой код.'
    assert 'status' in result, "Ключ 'status' отсутствует в ответе."
```




